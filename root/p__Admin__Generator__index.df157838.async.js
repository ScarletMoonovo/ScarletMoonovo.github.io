"use strict";(self.webpackChunkmoon_antd_frontend_init=self.webpackChunkmoon_antd_frontend_init||[]).push([[675],{50100:function(ue,Y,n){n.r(Y),n.d(Y,{default:function(){return l}});var y=n(97857),d=n.n(y),z=n(15009),p=n.n(z),q=n(99289),g=n.n(q),$=n(5574),N=n.n($),E=n(97112),w=n(83850),ee=n(76772),x=n(2453),D=n(17788),_=n(67294),m=n(85893),A=function(){var u=g()(p()().mark(function i(e){var t;return p()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return e.fileConfig=JSON.parse(e.fileConfig||"{}"),e.modelConfig=JSON.parse(e.modelConfig||"{}"),t=x.ZP.loading("\u6B63\u5728\u6DFB\u52A0"),r.prev=3,r.next=6,(0,E.qM)(e);case 6:return t(),x.ZP.success("\u521B\u5EFA\u6210\u529F"),r.abrupt("return",!0);case 11:return r.prev=11,r.t0=r.catch(3),t(),x.ZP.error("\u521B\u5EFA\u5931\u8D25\uFF0C"+r.t0.message),r.abrupt("return",!1);case 16:case"end":return r.stop()}},i,null,[[3,11]])}));return function(e){return u.apply(this,arguments)}}(),B=function(i){var e=i.visible,t=i.columns,s=i.onSubmit,r=i.onCancel;return(0,m.jsx)(D.Z,{destroyOnClose:!0,title:"\u521B\u5EFA",open:e,footer:null,onCancel:function(){r==null||r()},children:(0,m.jsx)(w.Z,{type:"form",columns:t,onSubmit:function(){var a=g()(p()().mark(function b(f){var v;return p()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,A(f);case 2:v=S.sent,v&&(s==null||s(f));case 4:case"end":return S.stop()}},b)}));return function(b){return a.apply(this,arguments)}}()})})},re=B,F=function(){var u=g()(p()().mark(function i(e){var t;return p()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=x.ZP.loading("\u6B63\u5728\u66F4\u65B0"),r.prev=1,r.next=4,(0,E.or)(e);case 4:return t(),x.ZP.success("\u66F4\u65B0\u6210\u529F"),r.abrupt("return",!0);case 9:return r.prev=9,r.t0=r.catch(1),t(),x.ZP.error("\u66F4\u65B0\u5931\u8D25\uFF0C"+r.t0.message),r.abrupt("return",!1);case 14:case"end":return r.stop()}},i,null,[[1,9]])}));return function(e){return u.apply(this,arguments)}}(),ae=function(i){var e=i.oldData,t=i.visible,s=i.columns,r=i.onSubmit,a=i.onCancel;return e?(0,m.jsx)(D.Z,{destroyOnClose:!0,title:"\u66F4\u65B0",open:t,footer:null,onCancel:function(){a==null||a()},children:(0,m.jsx)(w.Z,{type:"form",columns:s,form:{initialValues:{oldData:e,tags:JSON.parse(e.tags||"[]")}},onSubmit:function(){var b=g()(p()().mark(function f(v){var I;return p()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,F(d()(d()({},v),{},{id:e.id}));case 2:I=T.sent,I&&(r==null||r(v));case 4:case"end":return T.stop()}},f)}));return function(f){return b.apply(this,arguments)}}()})}):(0,m.jsx)(m.Fragment,{})},V=ae,oe=n(51042),L=n(34041),te=n(66309),W=n(42075),U=n(71471),H=n(83622),o=function(){var i=(0,_.useState)(!1),e=N()(i,2),t=e[0],s=e[1],r=(0,_.useState)(!1),a=N()(r,2),b=a[0],f=a[1],v=(0,_.useRef)(),I=(0,_.useState)(),S=N()(I,2),T=S[0],R=S[1],G=function(){var j=g()(p()().mark(function c(P){var C,X;return p()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(C=x.ZP.loading("\u6B63\u5728\u5220\u9664"),P){h.next=3;break}return h.abrupt("return",!0);case 3:return h.prev=3,h.next=6,(0,E.hL)({id:P.id});case 6:return C(),x.ZP.success("\u5220\u9664\u6210\u529F"),v==null||(X=v.current)===null||X===void 0||X.reload(),h.abrupt("return",!0);case 12:return h.prev=12,h.t0=h.catch(3),C(),x.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C"+h.t0.message),h.abrupt("return",!1);case 17:case"end":return h.stop()}},c,null,[[3,12]])}));return function(P){return j.apply(this,arguments)}}(),K=[{title:"id",dataIndex:"id",valueType:"text",hideInForm:!0},{title:"\u540D\u79F0",dataIndex:"name",valueType:"text"},{title:"\u63CF\u8FF0",dataIndex:"description",valueType:"textarea"},{title:"\u57FA\u7840\u5305",dataIndex:"basePackage",valueType:"text"},{title:"\u7248\u672C",dataIndex:"version",valueType:"text"},{title:"\u4F5C\u8005",dataIndex:"author",valueType:"text"},{title:"\u6807\u7B7E",dataIndex:"tags",valueType:"text",renderFormItem:function(c){var P=c.fieldProps;return(0,m.jsx)(L.Z,d()({mode:"tags"},P))},render:function(c,P){return P.tags?JSON.parse(P.tags).map(function(C){return(0,m.jsx)(te.Z,{children:C},C)}):(0,m.jsx)(m.Fragment,{})}},{title:"\u56FE\u7247",dataIndex:"picture",valueType:"image",fieldProps:{width:64},hideInSearch:!0},{title:"\u6587\u4EF6\u914D\u7F6E",dataIndex:"fileConfig",valueType:"jsonCode"},{title:"\u6A21\u578B\u914D\u7F6E",dataIndex:"modelConfig",valueType:"jsonCode"},{title:"\u4EA7\u7269\u5305\u8DEF\u5F84",dataIndex:"distPath",valueType:"text"},{title:"\u72B6\u6001",dataIndex:"status",valueEnum:{0:{text:"\u9ED8\u8BA4"}}},{title:"\u521B\u5EFA\u7528\u6237",dataIndex:"userId",valueType:"text"},{title:"\u521B\u5EFA\u65F6\u95F4",sorter:!0,dataIndex:"createTime",valueType:"dateTime",hideInSearch:!0,hideInForm:!0},{title:"\u66F4\u65B0\u65F6\u95F4",sorter:!0,dataIndex:"updateTime",valueType:"dateTime",hideInSearch:!0,hideInForm:!0},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(c,P){return(0,m.jsxs)(W.Z,{size:"middle",children:[(0,m.jsx)(U.Z.Link,{onClick:function(){R(P),f(!0)},children:"\u4FEE\u6539"}),(0,m.jsx)(U.Z.Link,{type:"danger",onClick:function(){return G(P)},children:"\u5220\u9664"})]})}}];return(0,m.jsxs)("div",{className:"generator-admin-page",children:[(0,m.jsx)(U.Z.Title,{level:4,style:{marginBottom:16},children:"\u4EE3\u7801\u751F\u6210\u5668\u7BA1\u7406"}),(0,m.jsx)(w.Z,{headerTitle:"\u67E5\u8BE2\u8868\u683C",actionRef:v,rowKey:"key",search:{labelWidth:120},toolBarRender:function(){return[(0,m.jsxs)(H.ZP,{type:"primary",onClick:function(){s(!0)},children:[(0,m.jsx)(oe.Z,{})," \u65B0\u5EFA"]},"primary")]},request:function(){var j=g()(p()().mark(function c(P,C,X){var k,h,J,se,O,M,le;return p()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return J=(k=Object.keys(C))===null||k===void 0?void 0:k[0],se=(h=C==null?void 0:C[J])!==null&&h!==void 0?h:void 0,Z.next=4,(0,E.qz)(d()(d()({},P),{},{sortField:J,sortOrder:se},X));case 4:return O=Z.sent,M=O.data,le=O.code,Z.abrupt("return",{success:le===0,data:(M==null?void 0:M.records)||[],total:Number(M==null?void 0:M.total)||0});case 8:case"end":return Z.stop()}},c)}));return function(c,P,C){return j.apply(this,arguments)}}(),columns:K}),(0,m.jsx)(re,{visible:t,columns:K,onSubmit:function(){var c;s(!1),(c=v.current)===null||c===void 0||c.reload()},onCancel:function(){s(!1)}}),(0,m.jsx)(V,{visible:b,columns:K,oldData:T,onSubmit:function(){var c;f(!1),R(void 0),(c=v.current)===null||c===void 0||c.reload()},onCancel:function(){f(!1)}})]})},l=o},97112:function(ue,Y,n){n.d(Y,{M1:function(){return ae},T:function(){return x},X9:function(){return _},cT:function(){return U},hL:function(){return w},or:function(){return te},qM:function(){return N},qz:function(){return re},vu:function(){return A}});var y=n(15009),d=n.n(y),z=n(97857),p=n.n(z),q=n(99289),g=n.n(q),$=n(76772);function N(o,l){return E.apply(this,arguments)}function E(){return E=g()(d()().mark(function o(l,u){return d()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,$.request)("/api/generator/add",p()({method:"POST",headers:{"Content-Type":"application/json"},data:l},u||{})));case 1:case"end":return e.stop()}},o)})),E.apply(this,arguments)}function w(o,l){return ee.apply(this,arguments)}function ee(){return ee=g()(d()().mark(function o(l,u){return d()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,$.request)("/api/generator/delete",p()({method:"POST",headers:{"Content-Type":"application/json"},data:l},u||{})));case 1:case"end":return e.stop()}},o)})),ee.apply(this,arguments)}function x(o,l){return D.apply(this,arguments)}function D(){return D=g()(d()().mark(function o(l,u){return d()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,$.request)("/api/generator/download",p()({method:"GET",params:p()({},l)},u||{})));case 1:case"end":return e.stop()}},o)})),D.apply(this,arguments)}function _(o,l){return m.apply(this,arguments)}function m(){return m=g()(d()().mark(function o(l,u){return d()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,$.request)("/api/generator/edit",p()({method:"POST",headers:{"Content-Type":"application/json"},data:l},u||{})));case 1:case"end":return e.stop()}},o)})),m.apply(this,arguments)}function A(o,l){return B.apply(this,arguments)}function B(){return B=g()(d()().mark(function o(l,u){return d()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,$.request)("/api/generator/get/vo",p()({method:"GET",params:p()({},l)},u||{})));case 1:case"end":return e.stop()}},o)})),B.apply(this,arguments)}function re(o,l){return F.apply(this,arguments)}function F(){return F=g()(d()().mark(function o(l,u){return d()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,$.request)("/api/generator/list/page",p()({method:"POST",headers:{"Content-Type":"application/json"},data:l},u||{})));case 1:case"end":return e.stop()}},o)})),F.apply(this,arguments)}function ae(o,l){return V.apply(this,arguments)}function V(){return V=g()(d()().mark(function o(l,u){return d()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,$.request)("/api/generator/list/page/vo",p()({method:"POST",headers:{"Content-Type":"application/json"},data:l},u||{})));case 1:case"end":return e.stop()}},o)})),V.apply(this,arguments)}function oe(o,l){return L.apply(this,arguments)}function L(){return L=_asyncToGenerator(_regeneratorRuntime().mark(function o(l,u){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/generator/my/list/page/vo",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:l},u||{})));case 1:case"end":return e.stop()}},o)})),L.apply(this,arguments)}function te(o,l){return W.apply(this,arguments)}function W(){return W=g()(d()().mark(function o(l,u){return d()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,$.request)("/api/generator/update",p()({method:"POST",headers:{"Content-Type":"application/json"},data:l},u||{})));case 1:case"end":return e.stop()}},o)})),W.apply(this,arguments)}function U(o,l){return H.apply(this,arguments)}function H(){return H=g()(d()().mark(function o(l,u){return d()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,$.request)("/api/generator/use",p()({method:"POST",headers:{"Content-Type":"application/json"},data:l},u||{})));case 1:case"end":return e.stop()}},o)})),H.apply(this,arguments)}},66309:function(ue,Y,n){n.d(Y,{Z:function(){return i}});var y=n(67294),d=n(93967),z=n.n(d),p=n(98423),q=n(98787),g=n(69760),$=n(96159),N=n(45353),E=n(53124),w=n(11568),ee=n(15063),x=n(14747),D=n(83262),_=n(83559);const m=e=>{const{paddingXXS:t,lineWidth:s,tagPaddingHorizontal:r,componentCls:a,calc:b}=e,f=b(r).sub(s).equal(),v=b(t).sub(s).equal();return{[a]:Object.assign(Object.assign({},(0,x.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:f,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${(0,w.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${a}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${a}-close-icon`]:{marginInlineStart:v,fontSize:e.tagIconSize,color:e.colorIcon,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${a}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${a}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:f}}),[`${a}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}},A=e=>{const{lineWidth:t,fontSizeIcon:s,calc:r}=e,a=e.fontSizeSM;return(0,D.IX)(e,{tagFontSize:a,tagLineHeight:(0,w.bf)(r(e.lineHeightSM).mul(a).equal()),tagIconSize:r(s).sub(r(t).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},B=e=>({defaultBg:new ee.t(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText});var re=(0,_.I$)("Tag",e=>{const t=A(e);return m(t)},B),F=function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(s[r[a]]=e[r[a]]);return s},V=y.forwardRef((e,t)=>{const{prefixCls:s,style:r,className:a,checked:b,onChange:f,onClick:v}=e,I=F(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:S,tag:T}=y.useContext(E.E_),R=C=>{f==null||f(!b),v==null||v(C)},G=S("tag",s),[K,j,c]=re(G),P=z()(G,`${G}-checkable`,{[`${G}-checkable-checked`]:b},T==null?void 0:T.className,a,j,c);return K(y.createElement("span",Object.assign({},I,{ref:t,style:Object.assign(Object.assign({},r),T==null?void 0:T.style),className:P,onClick:R})))}),oe=n(98719);const L=e=>(0,oe.Z)(e,(t,s)=>{let{textColor:r,lightBorderColor:a,lightColor:b,darkColor:f}=s;return{[`${e.componentCls}${e.componentCls}-${t}`]:{color:r,background:b,borderColor:a,"&-inverse":{color:e.colorTextLightSolid,background:f,borderColor:f},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}});var te=(0,_.bk)(["Tag","preset"],e=>{const t=A(e);return L(t)},B);function W(e){return typeof e!="string"?e:e.charAt(0).toUpperCase()+e.slice(1)}const U=(e,t,s)=>{const r=W(s);return{[`${e.componentCls}${e.componentCls}-${t}`]:{color:e[`color${s}`],background:e[`color${r}Bg`],borderColor:e[`color${r}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}};var H=(0,_.bk)(["Tag","status"],e=>{const t=A(e);return[U(t,"success","Success"),U(t,"processing","Info"),U(t,"error","Error"),U(t,"warning","Warning")]},B),o=function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(s[r[a]]=e[r[a]]);return s};const u=y.forwardRef((e,t)=>{const{prefixCls:s,className:r,rootClassName:a,style:b,children:f,icon:v,color:I,onClose:S,bordered:T=!0,visible:R}=e,G=o(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:K,direction:j,tag:c}=y.useContext(E.E_),[P,C]=y.useState(!0),X=(0,p.Z)(G,["closeIcon","closable"]);y.useEffect(()=>{R!==void 0&&C(R)},[R]);const k=(0,q.o2)(I),h=(0,q.yT)(I),J=k||h,se=Object.assign(Object.assign({backgroundColor:I&&!J?I:void 0},c==null?void 0:c.style),b),O=K("tag",s),[M,le,ce]=re(O),Z=z()(O,c==null?void 0:c.className,{[`${O}-${I}`]:J,[`${O}-has-color`]:I&&!J,[`${O}-hidden`]:!P,[`${O}-rtl`]:j==="rtl",[`${O}-borderless`]:!T},r,a,le,ce),de=ne=>{ne.stopPropagation(),S==null||S(ne),!ne.defaultPrevented&&C(!1)},[,ge]=(0,g.Z)((0,g.w)(e),(0,g.w)(c),{closable:!1,closeIconRender:ne=>{const ye=y.createElement("span",{className:`${O}-close-icon`,onClick:de},ne);return(0,$.wm)(ne,ye,Q=>({onClick:fe=>{var ie;(ie=Q==null?void 0:Q.onClick)===null||ie===void 0||ie.call(Q,fe),de(fe)},className:z()(Q==null?void 0:Q.className,`${O}-close-icon`)}))}}),ve=typeof G.onClick=="function"||f&&f.type==="a",pe=v||null,he=pe?y.createElement(y.Fragment,null,pe,f&&y.createElement("span",null,f)):f,me=y.createElement("span",Object.assign({},X,{ref:t,className:Z,style:se}),he,ge,k&&y.createElement(te,{key:"preset",prefixCls:O}),h&&y.createElement(H,{key:"status",prefixCls:O}));return M(ve?y.createElement(N.Z,{component:"Tag"},me):me)});u.CheckableTag=V;var i=u}}]);
